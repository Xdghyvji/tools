<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | DigitalServicesHub.online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>tailwind.config = {theme: {extend: {colors: { brand: { 50: '#eff6ff', 500: '#3b82f6', 600: '#2563eb' }}}}}</script>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased flex flex-col min-h-screen">
    <header class="fixed w-full top-0 z-50 bg-white/95 backdrop-blur border-b border-slate-200 shadow-sm h-20" id="main-header"></header>
    <main class="flex-grow pt-48 pb-20 flex items-center justify-center px-4">
        <div class="w-full max-w-md animate-fade-in">
            <div class="bg-white p-8 rounded-2xl shadow-xl border border-slate-100">
                <div class="text-center mb-8">
                    <div class="inline-flex bg-brand-600 p-3 rounded-xl text-white shadow-lg mb-4"><i data-lucide="lock" class="w-6 h-6"></i></div>
                    <h2 class="text-2xl font-bold font-heading">Welcome Back</h2>
                </div>
                <form id="login-form" class="space-y-5">
                    <div><label class="block text-sm font-medium mb-1">Email</label><input type="email" id="email" class="w-full p-3 border rounded-lg" required></div>
                    <div><label class="block text-sm font-medium mb-1">Password</label><input type="password" id="password" class="w-full p-3 border rounded-lg" required></div>
                    <div id="error-message" class="hidden text-red-500 text-sm text-center"></div>
                    <button type="submit" class="w-full py-3 bg-brand-600 text-white rounded-lg font-bold">Sign In</button>
                </form>
                <div class="relative my-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-slate-500">Or</span></div></div>
                <button id="google-btn" class="w-full flex items-center justify-center gap-2 px-4 py-2.5 border rounded-lg font-medium hover:bg-slate-50">Sign in with Google</button>
            </div>
        </div>
    </main>
    <footer id="main-footer"></footer>
    
    <!-- FIXED IMPORT PATH: ./assets/js/shared.js (since assets is inside tools folder) -->
    <script type="module">
        import { loadHeader, loadFooter, auth } from './assets/js/shared.js';
        import { signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        
        document.addEventListener("DOMContentLoaded", () => { 
            loadHeader(); 
            loadFooter(); 
            if(window.lucide) lucide.createIcons(); 
        });

        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const errorDiv = document.getElementById('error-message');
            
            try {
                await signInWithEmailAndPassword(auth, document.getElementById('email').value, document.getElementById('password').value);
                // EXPLICIT REDIRECT TO /tools/index.html
                window.location.href = '/tools/admin/index.html'; 
            } catch (error) { 
                errorDiv.textContent = "Invalid credentials. Please try again."; 
                errorDiv.classList.remove('hidden'); 
            }
        });

        document.getElementById('google-btn').addEventListener('click', async () => {
            try { 
                await signInWithPopup(auth, new GoogleAuthProvider()); 
                // EXPLICIT REDIRECT TO /tools/index.html
                window.location.href = '/tools/index.html'; 
            } catch(e) {
                console.error(e);
                document.getElementById('error-message').textContent = "Google sign-in failed.";
                document.getElementById('error-message').classList.remove('hidden');
            }
        });
    </script>
</body>
</html>
